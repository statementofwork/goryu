window.$clamp=function(l,e){e=e||{};var a,n=window,r={clamp:e.clamp||2,useNativeClamp:void 0===e.useNativeClamp||e.useNativeClamp,splitOnChars:e.splitOnChars||[".","-","–","—"," "],animate:e.animate||!1,truncationChar:e.truncationChar||"…",truncationHTML:e.truncationHTML},t=l.style,i=l.innerHTML,o=void 0!==l.style.webkitLineClamp,u=r.clamp,c=u.indexOf&&(-1<u.indexOf("px")||-1<u.indexOf("em"));function s(e,t){return n.getComputedStyle||(n.getComputedStyle=function(n,e){return this.el=n,this.getPropertyValue=function(e){var t=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),t.test(e)&&(e=e.replace(t,function(){return arguments[2].toUpperCase()})),n.currentStyle&&n.currentStyle[e]?n.currentStyle[e]:null},this}),n.getComputedStyle(e,null).getPropertyValue(t)}function h(e){var t=e||l.clientHeight,n=p(l);return Math.max(Math.floor(t/n),0)}function p(e){var t=s(e,"line-height");return"normal"==t&&(t=1.2*parseInt(s(e,"font-size"))),parseInt(t)}r.truncationHTML&&((a=document.createElement("span")).innerHTML=r.truncationHTML);var d,C,m,f,v=r.splitOnChars.slice(0),g=v[0];function y(e){return e.lastChild.children&&0<e.lastChild.children.length?y(Array.prototype.slice.call(e.children).pop()):e.lastChild&&e.lastChild.nodeValue&&""!=e.lastChild.nodeValue&&e.lastChild.nodeValue!=r.truncationChar?e.lastChild:(e.lastChild.parentNode.removeChild(e.lastChild),y(l))}function H(e,t){e.nodeValue=t+r.truncationChar}if("auto"==u?u=h():c&&(u=h(parseInt(u))),o&&r.useNativeClamp)t.overflow="hidden",t.textOverflow="ellipsis",t.webkitBoxOrient="vertical",t.display="-webkit-box",t.webkitLineClamp=u,c&&(t.height=r.clamp+"px");else{var L=(f=u,p(l)*f);L<=l.clientHeight&&(m=function e(t,n){if(n){var i=t.nodeValue.replace(r.truncationChar,"");if(d||(g=0<v.length?v.shift():"",d=i.split(g)),1<d.length?(C=d.pop(),H(t,d.join(g))):d=null,a&&(t.nodeValue=t.nodeValue.replace(r.truncationChar,""),l.innerHTML=t.nodeValue+" "+a.innerHTML+r.truncationChar),d){if(l.clientHeight<=n){if(!(0<=v.length&&""!=g))return l.innerHTML;H(t,d.join(g)+g+C),d=null}}else""==g&&(H(t,""),t=y(l),v=r.splitOnChars.slice(0),g=v[0],C=d=null);if(!r.animate)return e(t,n);setTimeout(function(){e(t,n)},!0===r.animate?10:r.animate)}}(y(l),L))}return{original:i,clamped:m}};